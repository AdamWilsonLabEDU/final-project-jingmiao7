[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Phenology of Mangroves",
    "section": "",
    "text": "Introduction\n  Materials and methods\n  \n  Materials\n  \n  Harmonized Landsat and Sentinel (HLS) dataset\n  Geographical location of mangrove samples\n  Normalized Difference Vegetation Index\n  Harmonic Regression\n  \n  Methods\n  \n  Install and load necessary packages\n  Prepare three mangrove species samples\n  Extract phenology from time-series HLS\n  \n  \n  Results\n  \n  Average NDVI\n  Pheonogy demostration based on harmonic regression\n  \n  Conclusion\n  References"
  },
  {
    "objectID": "index.html#materials",
    "href": "index.html#materials",
    "title": "Phenology of Mangroves",
    "section": "Materials",
    "text": "Materials\n\nHarmonized Landsat and Sentinel (HLS) dataset\nThe HLS product integrates data from the Landsat 8 (or Landsat 9) and Sentinel-2A (or Sentinel-2B) satellites, producing a harmonized surface reflectance dataset with a 30-meter spatial resolution. Moreover, HLS includes a Quality Assurance (QA) band, which provides data quality filters and masks for clouds, cloud shadows, and water bodies. To generate time series NDVI from HLS dataset, red and near inf-red bands are collected.\n\n\nGeographical location of mangrove samples\nThe geographical information of three mangrove species are collected from Project: The Vegetation of Everglades National Park: Final Report (Spatial Data) (Ruiz and Others 2021). 10 samples of each three mangrove species (red mangrove, white mangrove, and black mangrove) are extracted from this final report.\n\n\nNormalized Difference Vegetation Index\nNDVI is widely used to monitor vegetation health and phenological changes over time. The formula is:\n\n\\[\n\\text{NDVI} = \\frac{(NIR - RED)}{(NIR + RED)}\n\\]\n\n\n\n\nHarmonic Regression\nHarmonic regression is a statistical technique that fits sine and cosine functions to data and is adept at identifying and modeling the cyclical variations inherent in time series with periodic patterns.\n\n\\[\ny_t = \\beta_0 + \\sum_{k=1}^{K} \\left( \\beta_{k} \\cos\\left(\\frac{2\\pi k t}{T}\\right) + \\gamma_{k} \\sin\\left(\\frac{2\\pi k t}{T}\\right) \\right) + \\epsilon_t\n\\]\n\n Where:\n\n\\(y_t\\): The observed value at time \\(t\\).\n\\(\\beta_0\\): The intercept or constant term in the model.\n\\(\\beta_k\\): The coefficient for the cosine term corresponding to the \\(k\\)-th harmonic.\n\\(\\gamma_k\\): The coefficient for the sine term corresponding to the \\(k\\)-th harmonic.\n\\(T\\): The period of the data (e.g., the number of days in a year if the data is annual).\n\\(t\\): The time point or index (often representing the day of the year, etc.).\n\\(K\\): The total number of harmonics (sinusoidal terms) included in the model, usually based on the periodicity of the data.\n\\(\\epsilon_t\\): The error term at time \\(t\\), capturing the residual variability in the data that is not explained by the harmonic components."
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "Phenology of Mangroves",
    "section": "Methods",
    "text": "Methods\n\nInstall and load necessary packages\nThis study needs packages related to image processing, such as: terra, sf, and googledrive; moreover, packages related to result presentation are required, including ggplot2, leaflet, dplyr, and RColorBrewer.\n\nlibrary(terra)\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(leaflet)\nlibrary(RColorBrewer)\nlibrary(googledrive)\nlibrary(dplyr)\n\n\n\nPrepare three mangrove species samples\nThe distribution of three mangrove species samples in our study area is as shown in the following:\n\n\n\n\n\n\nThe downloaded HLS images are uploaded to Google Drive, we can access this data folder through ID. Then, we will collect band 4 and band5 from the dataset. Partial code is presented as following:\n\n# drive_auth() for first time to link Google Drive from R, we should do this authentication\nHLSImages_Folder_ID &lt;- \"MYGOOGLEFOLDERIDHERE\"\nHLS_Everglades &lt;- drive_ls(as_id(HLSImages_Folder_ID))\nHLS_band4 &lt;- HLS_Everglades %&gt;% filter(grepl(\"_B04_\", name))\nHLS_band5 &lt;- HLS_Everglades %&gt;% filter(grepl(\"_B05_\", name))\n\n# extract DOY from HLS_band4$name\nextract_doy &lt;- function(names_column) {\n  doy_values &lt;- gsub(\".*_doy(\\\\d{7}).*\", \"\\\\1\", names_column)\n  return(as.numeric(doy_values)) # convert it to numeric\n}\n\n# Add it to DOY column in HLS_band4 and HLS_band5\nHLS_band4$DOY &lt;- extract_doy(HLS_band4$name)\nHLS_band5$DOY &lt;- extract_doy(HLS_band5$name)\n\n# Initial the results file (extracted band 4 and band 5 values) as a list\nHLS_band4$download_link &lt;- sapply(HLS_band4$drive_resource, function(x) x$webContentLink)\nHLS_band5$download_link &lt;- sapply(HLS_band5$drive_resource, function(x) x$webContentLink)\n\nband4_rasters &lt;- lapply(HLS_band4$download_link, function(link) rast(link))\nband5_rasters &lt;- lapply(HLS_band5$download_link, function(link) rast(link))\n\n\n\nExtract phenology from time-series HLS\n\nNDVI values were retrieved for mangrove species sampling points. The extracted data were organized into a tabular format, with rows representing dates and columns representing NDVI values for each sample point.\n\n\n\nCode\n# Function to compute NDVI from Band 4 and Band 5 datasets\ncompute_ndvi &lt;- function(band4_file, band5_file, output_file) {\n  # Read Band 4 and Band 5 CSV files\n  cat(\"Reading Band 4 data from:\", band4_file, \"\\n\")\n  band4_data &lt;- read.csv(band4_file)\n  cat(\"Reading Band 5 data from:\", band5_file, \"\\n\")\n  band5_data &lt;- read.csv(band5_file)\n  \n  # Preprocess DOY columns\n  cat(\"Preprocessing DOY columns...\\n\")\n  band4_data$DOY &lt;- as.numeric(trimws(band4_data$DOY))\n  band5_data$DOY &lt;- as.numeric(trimws(band5_data$DOY))\n  \n  # Remove duplicates if present\n  if (any(duplicated(band4_data$DOY))) {\n    cat(\"Removing duplicate DOY values in Band 4...\\n\")\n    band4_data &lt;- band4_data[!duplicated(band4_data$DOY), ]\n  }\n  if (any(duplicated(band5_data$DOY))) {\n    cat(\"Removing duplicate DOY values in Band 5...\\n\")\n    band5_data &lt;- band5_data[!duplicated(band5_data$DOY), ]\n  }\n  \n  # Identify common DOY\n  cat(\"Identifying common DOY values...\\n\")\n  common_doy &lt;- intersect(band4_data$DOY, band5_data$DOY)\n  if (length(common_doy) == 0) {\n    stop(\"No matching DOY values found between Band 4 and Band 5 datasets.\")\n  }\n  cat(\"Number of matching DOY values:\", length(common_doy), \"\\n\")\n  \n  # Filter data to retain only matching DOY\n  band4_data &lt;- band4_data[band4_data$DOY %in% common_doy, ]\n  band5_data &lt;- band5_data[band5_data$DOY %in% common_doy, ]\n  \n  # Sort datasets by DOY\n  band4_data &lt;- band4_data[order(band4_data$DOY), ]\n  band5_data &lt;- band5_data[order(band5_data$DOY), ]\n  \n  # Check alignment of DOY columns\n  cat(\"Checking DOY alignment...\\n\")\n  if (!all(band4_data$DOY == band5_data$DOY)) {\n    mismatches &lt;- which(band4_data$DOY != band5_data$DOY)\n    cat(\"Mismatched DOY rows detected:\\n\")\n    print(band4_data$DOY[mismatches])\n    print(band5_data$DOY[mismatches])\n    stop(\"DOY columns still not aligned after sorting.\")\n  }\n  cat(\"DOY columns are aligned.\\n\")\n  \n  # Initialize NDVI results\n  cat(\"Initializing NDVI results...\\n\")\n  ndvi_results &lt;- data.frame(DOY = band4_data$DOY)\n  \n  # Compute NDVI for each sample point\n  cat(\"Computing NDVI for sample points...\\n\")\n  for (col in 2:ncol(band4_data)) {  # Skip the DOY column\n    band4_col &lt;- band4_data[, col]\n    band5_col &lt;- band5_data[, col]\n    \n    # Calculate NDVI\n    ndvi_results[, col] &lt;- (band5_col - band4_col) / (band5_col + band4_col)\n  }\n  \n  # Add column names to NDVI results\n  colnames(ndvi_results) &lt;- colnames(band4_data)\n  \n  # Save NDVI results to CSV\n  cat(\"Saving NDVI results to:\", output_file, \"\\n\")\n  write.csv(ndvi_results, output_file, row.names = FALSE)\n  cat(\"NDVI computation completed successfully.\\n\")\n}\n\ncompute_ndvi(\"data/extracted_band4_BM.csv\", \"data/extracted_band5_BM.csv\", \"data/ndvi_BM.csv\")\ncompute_ndvi(\"data/extracted_band4_RM.csv\", \"data/extracted_band5_RM.csv\", \"data/ndvi_RM.csv\")\ncompute_ndvi(\"data/extracted_band4_WM.csv\", \"data/extracted_band5_WM.csv\", \"data/ndvi_WM.csv\")\n\n\n\nHarmonic regression was employed to model the seasonal patterns in NDVI data. The fitted harmonic regression curves were plotted alongside the observed NDVI data points to visualize seasonal trends.\n\n\n\nCode\n# Function to preprocess DOY to extract the day of year\npreprocess_doy &lt;- function(doy_column) {\n  as.numeric(substr(doy_column, 5, 7))  # Extract last three digits\n}\n\n# Function to remove outliers based on 3x standard deviation\nremove_outliers &lt;- function(data) {\n  mean_ndvi &lt;- mean(data$Average_NDVI, na.rm = TRUE)\n  std_ndvi &lt;- sd(data$Average_NDVI, na.rm = TRUE)\n  threshold_low &lt;- mean_ndvi - 3 * std_ndvi\n  threshold_high &lt;- mean_ndvi + 3 * std_ndvi\n  data %&gt;%\n    filter(Average_NDVI &gt;= threshold_low & Average_NDVI &lt;= threshold_high)\n}\n\n# Function to fit harmonic regression and predict NDVI\nfit_harmonic_regression &lt;- function(data, species_name) {\n  # Preprocess DOY and remove outliers\n  data &lt;- data %&gt;%\n    mutate(DOY = preprocess_doy(DOY)) %&gt;%  # Preprocess DOY to extract day of year\n    filter(Average_NDVI &gt; 0 & Average_NDVI &lt; 1) %&gt;%  # Filter valid NDVI values\n    remove_outliers()  # Remove outliers based on 3x std\n  \n  # Fit harmonic regression\n  model &lt;- lm(Average_NDVI ~ cos(2 * pi * DOY / 365) + sin(2 * pi * DOY / 365), data = data)\n  \n  # Generate DOY sequence for predictions\n  doy_seq &lt;- seq(1, 365, by = 1)\n  predictions &lt;- predict(model, newdata = data.frame(\n    DOY = doy_seq\n  ))\n  \n  # Return observed data, fitted model, and predictions\n  list(\n    data = data,\n    model = model,\n    predictions = data.frame(DOY = doy_seq, Fitted_NDVI = predictions),\n    species = species_name\n  )\n}"
  },
  {
    "objectID": "index.html#average-ndvi",
    "href": "index.html#average-ndvi",
    "title": "Phenology of Mangroves",
    "section": "Average NDVI",
    "text": "Average NDVI\nThe NDVI value ranges are shown in the following graph.Among three mangrove species, red mangrove present the lowest average NDVI through the year 2023 (0.61), while white mangrove presents the highest average NDVI (0.65).Moreover, black mangrove presents highest peak NDVI through the year compared to other two mangrove species."
  },
  {
    "objectID": "index.html#pheonogy-demostration-based-on-harmonic-regression",
    "href": "index.html#pheonogy-demostration-based-on-harmonic-regression",
    "title": "Phenology of Mangroves",
    "section": "Pheonogy demostration based on harmonic regression",
    "text": "Pheonogy demostration based on harmonic regression\nWe used harmonic regression to generate descriptive phenological curves as following. We observed that many points fall outside the normal range of mangrove NDVI values. These outliers may be caused by cloud cover or water inundation.By observing the current results, the onset time of Red Mangrove appears to be earlier compared to the other two mangrove species."
  },
  {
    "objectID": "data/Readme.html",
    "href": "data/Readme.html",
    "title": "GEO511 Final Project",
    "section": "",
    "text": "Place any data needed by your analysis in this folder. Please do not store large files here. Then read in any data using the ‘data’ path. For example, read_csv(\"data/data.csv\")."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n\nCode\n# 1 + 1 I don't need this page"
  }
]